---
import { getCollection } from 'astro:content';
import '@fontsource/pathway-gothic-one'
import '@fontsource-variable/eb-garamond'

interface Props {
	/** Show title and description (full mode) or just titles (compact mode) */
	compact?: boolean;
	/** ID of the currently active post to highlight */
	activePostId?: string;
}

const { compact = false, activePostId } = Astro.props;
const allPosts = await getCollection('blog');
---

<div transition:name="blog-list" class="overflow-y-auto bg-gray-800/90 p-8">
	<ul class="flex flex-col gap-4">
		{
			allPosts.map((post) => (
				<li class:list={[
					"p-4 transition-colors",
					activePostId && post.id === activePostId
						? "bg-gray-600/80"
						: "bg-gray-700/60 hover:bg-gray-600/60"
				]}>
					{compact ? (
						<a href={`/blog/posts/${post.id}/`} class="text-blue-400 hover:underline text-sm">
							{post.data.title}
						</a>
					) : (
						<>
							<h3 class="text-xl font-semibold">{post.data.title}</h3>
							<p class="text-gray-300">{post.data.description}</p>
							<a href={`/blog/posts/${post.id}/`} class="text-blue-400 hover:underline">
								Read more â†’
							</a>
						</>
					)}
				</li>
			))
		}
	</ul>
</div>

<style>
	p {
		font-family: "EB Garamond Variable";
	}
</style>
